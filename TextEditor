import java.awt.*;
import java.awt.event.*;
import java.io.*;
import javax.swing.*;
import javax.swing.text.*;

class TextEditor extends JFrame 
{
  private JTextArea area = new JTextArea(25, 75); // Controls the size of the window
  private JFileChooser dialog = new JFileChooser(System.getProperty("user.dir"));
  private String currentFile = "Untitled"; // Title of file until it is named
  private boolean changed = false;
  
  public TextEditor() 
  {
    area.setFont(new Font("Times New Roman",Font.PLAIN,12));
    JScrollPane scroll = new JScrollPane(area,JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
    add(scroll,BorderLayout.CENTER);
    
    JMenuBar menu = new JMenuBar();
    setJMenuBar(menu);
    
    JMenu file = new JMenu("File");
    file.add(New);
    file.add(Open);
    file.add(Save);
    file.add(SaveAs);
    file.add(Quit);
    file.addSeparator();
    
    JMenu edit = new JMenu("Edit");
    edit.add(Cut);
    edit.add(Copy);
    edit.add(Paste);
    
    edit.getItem(0).setText("Cut");
    edit.getItem(1).setText("Copy");
    edit.getItem(2).setText("Paste");
    
    JMenu format = new JMenu("Format");
    
    for(int i=0; i < 4; i++)
    {
      file.getItem(i).setIcon(null);
    }
    
    menu.add(file); 
    menu.add(edit);
    menu.add(format);
    
    JToolBar tool = new JToolBar();
    add(tool,BorderLayout.NORTH);
    tool.add(New);
    tool.add(Open);
    tool.add(Save);
    tool.addSeparator();

    Save.setEnabled(false);
    SaveAs.setEnabled(false);
    
    pack();
    area.addKeyListener(majorKey);
    setTitle(currentFile);
    setVisible(true);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
  }
  
  private KeyListener majorKey = new KeyAdapter() 
  {
    public void keyPressed(KeyEvent e) 
    {
      changed = true;
      Save.setEnabled(true);
      SaveAs.setEnabled(true);
    }
  };
  
  Action New = new AbstractAction("New", new ImageIcon("new.gif")) 
  {
    public void actionPerformed(ActionEvent e) 
    {
      File file = new File("YourFile.txt");
    }
  };
  
  Action Open = new AbstractAction("Open", new ImageIcon("open.gif")) 
  {
    public void actionPerformed(ActionEvent e) 
    {
      saveOld();
      if(dialog.showOpenDialog(null)==JFileChooser.APPROVE_OPTION) 
      {
        readInFile(dialog.getSelectedFile().getAbsolutePath());
      }
      SaveAs.setEnabled(true);
    }
  };
  
  Action Save = new AbstractAction("Save", new ImageIcon("save.gif")) 
  {
    public void actionPerformed(ActionEvent e) 
    {
      if(!currentFile.equals("Untitled"))
        saveFile(currentFile);
      else
        saveFileAs();
    }
  };
  
  Action SaveAs = new AbstractAction("Save As") 
  {
    public void actionPerformed(ActionEvent e) 
    {
      saveFileAs();
    }
  };
  
  Action Quit = new AbstractAction("Quit") 
  {
    public void actionPerformed(ActionEvent e) 
    {
      saveOld();
      System.exit(0);
    }
  };
  
  ActionMap m = area.getActionMap();
  Action Cut = m.get(DefaultEditorKit.cutAction);
  Action Copy = m.get(DefaultEditorKit.copyAction);
  Action Paste = m.get(DefaultEditorKit.pasteAction);
  
  private void saveFileAs() 
  {
    if(dialog.showSaveDialog(null)==JFileChooser.APPROVE_OPTION)
      saveFile(dialog.getSelectedFile().getAbsolutePath());
  }
  
  private void saveOld() 
  {
    if(changed) 
    {
      if(JOptionPane.showConfirmDialog(this, "Would you like to save "+ currentFile +" ?","Save",JOptionPane.YES_NO_OPTION)== JOptionPane.YES_OPTION)
        saveFile(currentFile);
    }
  }
  
  private void readInFile(String fileName) 
  {
    try 
    {
      FileReader reader = new FileReader(fileName);
      area.read(reader,null);
      reader.close();
      currentFile = fileName;
      setTitle(currentFile);
      changed = false;
    }
    catch(IOException e) 
    {
      Toolkit.getDefaultToolkit().beep();
      JOptionPane.showMessageDialog(this,"Editor can't find the file called "+fileName);
    }
  }
  
  private void saveFile(String fileName) 
  {
    try 
    {
      FileWriter writer = new FileWriter(fileName);
      area.write(writer);
      writer.close();
      currentFile = fileName;
      setTitle(currentFile);
      changed = false;
      Save.setEnabled(false);
    }
    catch(IOException e) 
    {
      System.out.println("Error");
    }
  }
  
  public  static void main(String[] arg) 
  {
    new TextEditor();
  }
}
